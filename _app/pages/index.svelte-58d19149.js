var xe=Object.defineProperty;var ie=Object.getOwnPropertySymbols;var De=Object.prototype.hasOwnProperty,Ve=Object.prototype.propertyIsEnumerable;var ne=(s,e,r)=>e in s?xe(s,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[e]=r,Y=(s,e)=>{for(var r in e||(e={}))De.call(e,r)&&ne(s,r,e[r]);if(ie)for(var r of ie(e))Ve.call(e,r)&&ne(s,r,e[r]);return s};import{D as Se,S as ee,i as te,s as re,e as _,c as b,a as p,d as u,b as d,f as Q,g as q,K as c,M as z,t as O,k as P,h as T,m as $,j as W,q as C,w as ge,x as ye,y as ke,o as M,B as we,n as K,p as X,l as U,I as oe,U as Ee,L as Ie,V as Le,N as Z,W as Be}from"../chunks/vendor-e06a1edb.js";import{w as Ne,m as qe}from"../chunks/stores-97c1178b.js";const ce={librarypoint:"CRRL",mrl:"Massanutten",finditva:"Library of Virginia",nnpls:"Newport News",chesapeake:"chesapeake",rvl:"rvl",princewilliam:"princewilliam",brdc:"brdc",swvapub:"swvapub",vppl:"vppl",elprlibrary:"elprlibrary",yorkcountyva:"yorkcountyva",brooklyn:"brooklyn"},J=Se({});function Oe(s,e){const r=s,t=`https://${s}.overdrive.com`,l=new Request(`${t}/search?query=${e.replaceAll(" ","+")}&format=ebook-overdrive&sortBy=relevance`);fetch(l).then(i=>i.text()).then(i=>{const h=new DOMParser().parseFromString(i,"text/html"),m={type:"results",results:[]};if(!h.getElementById("noresults")){const n=/window\.OverDrive\.titleCollection.*\n/.exec(h.head.innerHTML)[0].substring(35),v=JSON.parse(n.substring(0,n.length-2));m.results=v.map(({id:f,title:L,isAvailable:B,firstCreatorName:D,covers:E})=>({id:f,title:L,isAvailable:B,firstCreatorName:D,cover:E.cover150Wide}))}J.update(o=>(o[e][r]=m,o))}).catch(i=>{console.log({err:i}),J.update(a=>(a[e][r]={type:"error",err:i},a))})}function G(s,e){if(!s)return;const r=Object.fromEntries(e.map(t=>[t,{type:"querying"}]));r._meta={datetime:new Date().toISOString()},J.update(t=>(t[s]=Y(Y({},t[s]),r),t));for(const t of e)Oe(t,s)}function Te(s){let e,r;return{c(){e=_("div"),r=_("div"),this.h()},l(t){e=b(t,"DIV",{class:!0,style:!0});var l=p(e);r=b(l,"DIV",{class:!0}),p(r).forEach(u),l.forEach(u),this.h()},h(){d(r,"class","rainbow border-r-[#88C5CC] dark:border-r-[#FFD05B] svelte-uawhdf"),d(e,"class","wrapper inline-block absolute -mt-0.5 ml-2 svelte-uawhdf"),Q(e,"--size",s[2]+s[0]),Q(e,"--duration",s[1])},m(t,l){q(t,e,l),c(e,r)},p(t,[l]){l&5&&Q(e,"--size",t[2]+t[0]),l&2&&Q(e,"--duration",t[1])},i:z,o:z,d(t){t&&u(e)}}}function Re(s,e,r){let{unit:t="px"}=e,{duration:l="1.5s"}=e,{size:i="40"}=e;return s.$$set=a=>{"unit"in a&&r(0,t=a.unit),"duration"in a&&r(1,l=a.duration),"size"in a&&r(2,i=a.size)},[t,l,i]}class Ce extends ee{constructor(e){super();te(this,e,Re,Te,re,{unit:0,duration:1,size:2})}}function ue(s,e,r){const t=s.slice();return t[2]=e[r].id,t[3]=e[r].title,t[4]=e[r].isAvailable,t[5]=e[r].firstCreatorName,t[6]=e[r].cover,t}function fe(s){let e,r,t,l=ce[s[0]]+"",i,a,h,m,y,o,I,n,v,f=s[1].type==="querying"&&de();function L(E,g){return E[1].type==="error"?je:E[1].type==="querying"?Me:E[1].results.length==0?$e:Pe}let B=L(s),D=B(s);return{c(){e=_("div"),r=_("div"),t=_("h5"),i=O(l),a=P(),f&&f.c(),h=P(),m=_("p"),y=O(s[0]),o=P(),I=_("div"),n=_("ul"),D.c(),this.h()},l(E){e=b(E,"DIV",{class:!0});var g=p(e);r=b(g,"DIV",{class:!0});var w=p(r);t=b(w,"H5",{class:!0});var x=p(t);i=T(x,l),a=$(x),f&&f.l(x),x.forEach(u),h=$(w),m=b(w,"P",{class:!0});var k=p(m);y=T(k,s[0]),k.forEach(u),w.forEach(u),o=$(g),I=b(g,"DIV",{class:!0});var V=p(I);n=b(V,"UL",{class:!0});var R=p(n);D.l(R),R.forEach(u),V.forEach(u),g.forEach(u),this.h()},h(){d(t,"class","text-xl font-bold leading-none text-gray-900 dark:text-white"),d(m,"class","text-sm text-gray-500 truncate dark:text-gray-400"),d(r,"class","flex flex-col justify-between items-start mb-4"),d(n,"class","divide-y divide-gray-200 dark:divide-gray-700"),d(I,"class","flow-root"),d(e,"class","p-4 my-4 mx-auto max-w-2xl bg-white rounded-lg border shadow-md sm:p-8 dark:bg-gray-800 dark:border-gray-700")},m(E,g){q(E,e,g),c(e,r),c(r,t),c(t,i),c(t,a),f&&f.m(t,null),c(r,h),c(r,m),c(m,y),c(e,o),c(e,I),c(I,n),D.m(n,null),v=!0},p(E,g){(!v||g&1)&&l!==(l=ce[E[0]]+"")&&W(i,l),E[1].type==="querying"?f?g&2&&C(f,1):(f=de(),f.c(),C(f,1),f.m(t,null)):f&&(K(),M(f,1,1,()=>{f=null}),X()),(!v||g&1)&&W(y,E[0]),B===(B=L(E))&&D?D.p(E,g):(D.d(1),D=B(E),D&&(D.c(),D.m(n,null)))},i(E){v||(C(f),v=!0)},o(E){M(f),v=!1},d(E){E&&u(e),f&&f.d(),D.d()}}}function de(s){let e,r;return e=new Ce({}),{c(){ge(e.$$.fragment)},l(t){ye(e.$$.fragment,t)},m(t,l){ke(e,t,l),r=!0},i(t){r||(C(e.$$.fragment,t),r=!0)},o(t){M(e.$$.fragment,t),r=!1},d(t){we(e,t)}}}function Pe(s){let e,r=s[1].results,t=[];for(let l=0;l<r.length;l+=1)t[l]=he(ue(s,r,l));return{c(){for(let l=0;l<t.length;l+=1)t[l].c();e=U()},l(l){for(let i=0;i<t.length;i+=1)t[i].l(l);e=U()},m(l,i){for(let a=0;a<t.length;a+=1)t[a].m(l,i);q(l,e,i)},p(l,i){if(i&3){r=l[1].results;let a;for(a=0;a<r.length;a+=1){const h=ue(l,r,a);t[a]?t[a].p(h,i):(t[a]=he(h),t[a].c(),t[a].m(e.parentNode,e))}for(;a<t.length;a+=1)t[a].d(1);t.length=r.length}},d(l){Ee(t,l),l&&u(e)}}}function $e(s){let e,r,t,l,i;return{c(){e=_("li"),r=_("div"),t=_("div"),l=_("p"),i=O("No results"),this.h()},l(a){e=b(a,"LI",{class:!0});var h=p(e);r=b(h,"DIV",{class:!0});var m=p(r);t=b(m,"DIV",{class:!0});var y=p(t);l=b(y,"P",{class:!0});var o=p(l);i=T(o,"No results"),o.forEach(u),y.forEach(u),m.forEach(u),h.forEach(u),this.h()},h(){d(l,"class","text-sm font-medium text-gray-900 truncate dark:text-white"),d(t,"class","flex-1 min-w-0"),d(r,"class","flex items-center space-x-4"),d(e,"class","py-3 sm:py-4")},m(a,h){q(a,e,h),c(e,r),c(r,t),c(t,l),c(l,i)},p:z,d(a){a&&u(e)}}}function Me(s){let e,r,t,l,i;return{c(){e=_("li"),r=_("div"),t=_("div"),l=_("p"),i=O("Querying"),this.h()},l(a){e=b(a,"LI",{class:!0});var h=p(e);r=b(h,"DIV",{class:!0});var m=p(r);t=b(m,"DIV",{class:!0});var y=p(t);l=b(y,"P",{class:!0});var o=p(l);i=T(o,"Querying"),o.forEach(u),y.forEach(u),m.forEach(u),h.forEach(u),this.h()},h(){d(l,"class","text-sm font-medium text-gray-900 truncate dark:text-white"),d(t,"class","flex-1 min-w-0"),d(r,"class","flex items-center space-x-4"),d(e,"class","py-3 sm:py-4")},m(a,h){q(a,e,h),c(e,r),c(r,t),c(t,l),c(l,i)},p:z,d(a){a&&u(e)}}}function je(s){let e,r,t,l,i;return{c(){e=_("li"),r=_("div"),t=_("div"),l=_("p"),i=O("Error"),this.h()},l(a){e=b(a,"LI",{class:!0});var h=p(e);r=b(h,"DIV",{class:!0});var m=p(r);t=b(m,"DIV",{class:!0});var y=p(t);l=b(y,"P",{class:!0});var o=p(l);i=T(o,"Error"),o.forEach(u),y.forEach(u),m.forEach(u),h.forEach(u),this.h()},h(){d(l,"class","text-sm font-medium text-gray-900 truncate dark:text-white"),d(t,"class","flex-1 min-w-0"),d(r,"class","flex items-center space-x-4"),d(e,"class","py-3 sm:py-4")},m(a,h){q(a,e,h),c(e,r),c(r,t),c(t,l),c(l,i)},p:z,d(a){a&&u(e)}}}function ze(s){let e;return{c(){e=O("unavailable")},l(r){e=T(r,"unavailable")},m(r,t){q(r,e,t)},d(r){r&&u(e)}}}function Ue(s){let e;return{c(){e=O("available")},l(r){e=T(r,"available")},m(r,t){q(r,e,t)},d(r){r&&u(e)}}}function he(s){let e,r,t,l,i,a,h,m,y,o,I,n=s[3]+"",v,f,L,B,D=s[5]+"",E,g,w,x;function k(S,N){return S[4]?Ue:ze}let V=k(s),R=V(s);return{c(){e=_("li"),r=_("div"),t=_("div"),l=_("a"),i=_("img"),y=P(),o=_("div"),I=_("a"),v=O(n),L=P(),B=_("p"),E=O(D),g=P(),w=_("div"),R.c(),x=P(),this.h()},l(S){e=b(S,"LI",{class:!0});var N=p(e);r=b(N,"DIV",{class:!0});var j=p(r);t=b(j,"DIV",{class:!0});var A=p(t);l=b(A,"A",{href:!0,class:!0});var F=p(l);i=b(F,"IMG",{class:!0,src:!0,alt:!0}),F.forEach(u),A.forEach(u),y=$(j),o=b(j,"DIV",{class:!0});var H=p(o);I=b(H,"A",{href:!0,class:!0});var le=p(I);v=T(le,n),le.forEach(u),L=$(H),B=b(H,"P",{class:!0});var se=p(B);E=T(se,D),se.forEach(u),H.forEach(u),g=$(j),w=b(j,"DIV",{class:!0});var ae=p(w);R.l(ae),ae.forEach(u),j.forEach(u),x=$(N),N.forEach(u),this.h()},h(){d(i,"class","h-16"),oe(i.src,a=s[6].href)||d(i,"src",a),d(i,"alt",h=s[3]+" cover"),d(l,"href",m=`https://${s[0]}.overdrive.com/media/${s[2]}`),d(l,"class","text-sm font-medium text-gray-900 dark:text-white"),d(t,"class","flex-shrink-0"),d(I,"href",f=`https://${s[0]}.overdrive.com/media/${s[2]}`),d(I,"class","text-sm font-medium text-gray-900 dark:text-white"),d(B,"class","text-sm text-gray-500 truncate dark:text-gray-400"),d(o,"class","flex-1 min-w-0"),d(w,"class","inline-flex items-center text-base font-semibold text-gray-900 dark:text-white"),d(r,"class","flex items-center space-x-4"),d(e,"class","py-3 sm:py-4")},m(S,N){q(S,e,N),c(e,r),c(r,t),c(t,l),c(l,i),c(r,y),c(r,o),c(o,I),c(I,v),c(o,L),c(o,B),c(B,E),c(r,g),c(r,w),R.m(w,null),c(e,x)},p(S,N){N&2&&!oe(i.src,a=S[6].href)&&d(i,"src",a),N&2&&h!==(h=S[3]+" cover")&&d(i,"alt",h),N&3&&m!==(m=`https://${S[0]}.overdrive.com/media/${S[2]}`)&&d(l,"href",m),N&2&&n!==(n=S[3]+"")&&W(v,n),N&3&&f!==(f=`https://${S[0]}.overdrive.com/media/${S[2]}`)&&d(I,"href",f),N&2&&D!==(D=S[5]+"")&&W(E,D),V!==(V=k(S))&&(R.d(1),R=V(S),R&&(R.c(),R.m(w,null)))},d(S){S&&u(e),R.d()}}}function Ae(s){let e,r,t=s[0]!=="_meta"&&fe(s);return{c(){t&&t.c(),e=U()},l(l){t&&t.l(l),e=U()},m(l,i){t&&t.m(l,i),q(l,e,i),r=!0},p(l,[i]){l[0]!=="_meta"?t?(t.p(l,i),i&1&&C(t,1)):(t=fe(l),t.c(),C(t,1),t.m(e.parentNode,e)):t&&(K(),M(t,1,1,()=>{t=null}),X())},i(l){r||(C(t),r=!0)},o(l){M(t),r=!1},d(l){t&&t.d(l),l&&u(e)}}}function Fe(s,e,r){let{library:t}=e,{results:l}=e;return s.$$set=i=>{"library"in i&&r(0,t=i.library),"results"in i&&r(1,l=i.results)},[t,l]}class We extends ee{constructor(e){super();te(this,e,Fe,Ae,re,{library:0,results:1})}}function me(s,e,r){const t=s.slice();return t[8]=e[r][0],t[9]=e[r][1],t[11]=r,t}function ve(s){let e,r,t,l,i,a,h,m,y=Object.entries(s[1][s[0]]),o=[];for(let n=0;n<y.length;n+=1)o[n]=_e(me(s,y,n));const I=n=>M(o[n],1,1,()=>{o[n]=null});return{c(){e=_("div"),r=_("h4"),t=O("Results for '"),l=O(s[0]),i=O("'"),a=P();for(let n=0;n<o.length;n+=1)o[n].c();h=U(),this.h()},l(n){e=b(n,"DIV",{class:!0});var v=p(e);r=b(v,"H4",{});var f=p(r);t=T(f,"Results for '"),l=T(f,s[0]),i=T(f,"'"),f.forEach(u),v.forEach(u),a=$(n);for(let L=0;L<o.length;L+=1)o[L].l(n);h=U(),this.h()},h(){d(e,"class","p-2 -mb-4 mt-8 md:mt-4 mx-auto max-w-2xl sm:p-2 dark:text-white")},m(n,v){q(n,e,v),c(e,r),c(r,t),c(r,l),c(r,i),q(n,a,v);for(let f=0;f<o.length;f+=1)o[f].m(n,v);q(n,h,v),m=!0},p(n,v){if((!m||v&1)&&W(l,n[0]),v&3){y=Object.entries(n[1][n[0]]);let f;for(f=0;f<y.length;f+=1){const L=me(n,y,f);o[f]?(o[f].p(L,v),C(o[f],1)):(o[f]=_e(L),o[f].c(),C(o[f],1),o[f].m(h.parentNode,h))}for(K(),f=y.length;f<o.length;f+=1)I(f);X()}},i(n){if(!m){for(let v=0;v<y.length;v+=1)C(o[v]);m=!0}},o(n){o=o.filter(Boolean);for(let v=0;v<o.length;v+=1)M(o[v]);m=!1},d(n){n&&u(e),n&&u(a),Ee(o,n),n&&u(h)}}}function _e(s){let e,r;return e=new We({props:{library:s[8],results:s[9]}}),{c(){ge(e.$$.fragment)},l(t){ye(e.$$.fragment,t)},m(t,l){ke(e,t,l),r=!0},p(t,l){const i={};l&3&&(i.library=t[8]),l&3&&(i.results=t[9]),e.$set(i)},i(t){r||(C(e.$$.fragment,t),r=!0)},o(t){M(e.$$.fragment,t),r=!1},d(t){we(e,t)}}}function be(s){let e,r,t,l,i;return{c(){e=_("div"),r=_("button"),t=O("Search Wishlist Libraries"),this.h()},l(a){e=b(a,"DIV",{class:!0});var h=p(e);r=b(h,"BUTTON",{class:!0});var m=p(r);t=T(m,"Search Wishlist Libraries"),m.forEach(u),h.forEach(u),this.h()},h(){d(r,"class","font-sans font-semibold tracking-wide mx-auto text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:ring-blue-300 font-medium rounded-lg text-sm w-full sm:w-auto px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800"),d(e,"class","container mx-auto my-4 px-4 flex items-center")},m(a,h){q(a,e,h),c(e,r),c(r,t),l||(i=Ie(r,"click",s[3]),l=!0)},p:z,d(a){a&&u(e),l=!1,i()}}}function pe(s){let e,r,t,l,i;return{c(){e=_("div"),r=_("button"),t=O("Search Brooklyn"),this.h()},l(a){e=b(a,"DIV",{class:!0});var h=p(e);r=b(h,"BUTTON",{class:!0});var m=p(r);t=T(m,"Search Brooklyn"),m.forEach(u),h.forEach(u),this.h()},h(){d(r,"class","font-sans font-semibold tracking-wide mx-auto text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:ring-blue-300 font-medium rounded-lg text-sm w-full sm:w-auto px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800"),d(e,"class","container mx-auto my-4 px-4 flex items-center")},m(a,h){q(a,e,h),c(e,r),c(r,t),l||(i=Ie(r,"click",s[4]),l=!0)},p:z,d(a){a&&u(e),l=!1,i()}}}function He(s){let e,r,t,l,i,a,h,m,y,o,I,n,v,f,L,B,D,E,g=s[1][s[0]]&&ve(s),w=s[0]in s[1]&&!("chesapeake"in s[1][s[0]])&&be(s),x=s[0]in s[1]&&!("brooklyn"in s[1][s[0]])&&pe(s);return{c(){e=_("div"),r=_("div"),t=_("form"),l=_("div"),i=_("label"),a=O("Search your libraries"),h=P(),m=_("input"),y=P(),o=_("button"),I=O("Submit"),n=P(),v=_("div"),g&&g.c(),f=P(),w&&w.c(),L=P(),x&&x.c(),this.h()},l(k){e=b(k,"DIV",{class:!0});var V=p(e);r=b(V,"DIV",{class:!0});var R=p(r);t=b(R,"FORM",{});var S=p(t);l=b(S,"DIV",{class:!0});var N=p(l);i=b(N,"LABEL",{for:!0,class:!0});var j=p(i);a=T(j,"Search your libraries"),j.forEach(u),h=$(N),m=b(N,"INPUT",{name:!0,type:!0,id:!0,class:!0,placeholder:!0}),N.forEach(u),y=$(S),o=b(S,"BUTTON",{type:!0,class:!0});var A=p(o);I=T(A,"Submit"),A.forEach(u),S.forEach(u),R.forEach(u),n=$(V),v=b(V,"DIV",{class:!0});var F=p(v);g&&g.l(F),F.forEach(u),f=$(V),w&&w.l(V),L=$(V),x&&x.l(V),V.forEach(u),this.h()},h(){d(i,"for","terms"),d(i,"class","block pl-1 mb-2 font-sans text-sm font-medium text-gray-900 dark:text-gray-300"),d(m,"name","terms"),d(m,"type","text"),d(m,"id","terms"),d(m,"class","bg-gray-50 border border-gray-300 text-gray-900 font-sans text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"),d(m,"placeholder","Terms..."),m.required=!0,d(l,"class","mb-6"),d(o,"type","submit"),d(o,"class","font-sans font-semibold tracking-wide text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:ring-blue-300 font-medium rounded-lg text-sm w-full sm:w-auto px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800"),d(r,"class","container mx-auto px-4"),d(v,"class","container mx-auto px-4"),d(e,"class","h-full min-h-screen py-8 bg-slate-100 dark:bg-slate-700")},m(k,V){q(k,e,V),c(e,r),c(r,t),c(t,l),c(l,i),c(i,a),c(l,h),c(l,m),c(t,y),c(t,o),c(o,I),c(e,n),c(e,v),g&&g.m(v,null),c(e,f),w&&w.m(e,null),c(e,L),x&&x.m(e,null),B=!0,D||(E=Le(s[2].call(null,t)),D=!0)},p(k,[V]){k[1][k[0]]?g?(g.p(k,V),V&3&&C(g,1)):(g=ve(k),g.c(),C(g,1),g.m(v,null)):g&&(K(),M(g,1,1,()=>{g=null}),X()),k[0]in k[1]&&!("chesapeake"in k[1][k[0]])?w?w.p(k,V):(w=be(k),w.c(),w.m(e,L)):w&&(w.d(1),w=null),k[0]in k[1]&&!("brooklyn"in k[1][k[0]])?x?x.p(k,V):(x=pe(k),x.c(),x.m(e,null)):x&&(x.d(1),x=null)},i(k){B||(C(g),B=!0)},o(k){M(g),B=!1},d(k){k&&u(e),g&&g.d(),w&&w.d(),x&&x.d(),D=!1,E()}}}const Xe=!0;function Qe(s,e,r){var I;let t,l,i;Z(s,Ne,n=>r(5,t=n)),Z(s,qe,n=>r(6,l=n)),Z(s,J,n=>r(1,i=n));let a=(I=window.sessionStorage.getItem("terms"))!=null?I:"";a&&G(a,l);function h(n,v){window.sessionStorage.setItem(n,v)}const{form:m}=Be({onSubmit:n=>{r(0,a=n.terms),G(a,l)},validate:n=>{n.terms&&h("terms",n.terms)},initialValues:{terms:a}});function y(){G(a,t)}function o(){G(a,["brooklyn"])}return[a,i,m,y,o]}class Ye extends ee{constructor(e){super();te(this,e,Qe,He,re,{})}}export{Ye as default,Xe as prerender};
